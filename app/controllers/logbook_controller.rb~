class LogbookController < ApplicationController
  before_action :logged_in_user
  before_action :current_user
  
  require 'totals'
  
  def index
    if logged_in?
		@totals = Totals.new
      unless params.has_key?(:view) && params[:view] == 'flights'
		@entries = Entry.where(user_id: current_user.id).order(:date).paginate(page: params[:page], per_page: 10)
      else
      	@flights = Flight.where(user_id: current_user.id).joins(:entry).order('entries.date').order(:blockout).paginate(page: params[:page], per_page: 30)
   	  end
    else
      redirect_back_or login_path
    end
  end
end
